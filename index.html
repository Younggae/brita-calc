<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BRITA Íµ¨ÎèÖÏÑúÎπÑÏä§ Í≥ÑÏÇ∞Í∏∞</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      padding: 20px;
      color: #003366;
      max-width: 480px;
      margin: auto;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .header h2 {
      color: #005BAC;
      font-size: 20px;
      margin: 0;
    }
    .header img {
      height: 40px;
    }
    label {
      font-weight: 600;
      margin-top: 10px;
      display: block;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      margin-bottom: 15px;
      border: 2px solid #A6D9F7;
      border-radius: 8px;
      font-size: 16px;
    }
    .result {
      background: #E8F4FB;
      border-left: 5px solid #00A3E0;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    .result span {
      font-size: 20px;
      font-weight: bold;
      color: #005BAC;
    }
  </style>
</head>
<body>
  <div class="header">
    <h2>Íµ¨ÎèÖÏÑúÎπÑÏä§ Í≥ÑÏÇ∞Í∏∞</h2>
    <img src="BRITA_Logo_3c_RGB.png" alt="BRITA Logo">
  </div>

  <script>
    const optionsHTML = `
      <option value="">- ÏÑ†ÌÉù -</option>
      <option value="170000" data-vessel="0">C1000AC</option>
      <option value="130000" data-vessel="0">C25</option>
      <option value="180000" data-vessel="0">C50</option>
      <option value="270000" data-vessel="0">C150</option>
      <option value="400000" data-vessel="0">C300</option>
      <option value="550000" data-vessel="0">C500</option>
      <option value="390000" data-vessel="460000">450</option>
      <option value="390000" data-vessel="0">450 CTG</option>
      <option value="420000" data-vessel="780000">600</option>
      <option value="420000" data-vessel="0">600 CTG</option>
      <option value="550000" data-vessel="1050000">1200</option>
      <option value="550000" data-vessel="0">1200 CTG</option>
      <option value="80000" data-vessel="0">Head</option>
      <option value="1200000" data-vessel="0">PURITY Quell ST 600 SET</option>
      <option value="1600000" data-vessel="0">PURITY Quell ST 1200 SET</option>
      <option value="420000" data-vessel="0">PURITY Quell ST 600 CTG</option>
      <option value="550000" data-vessel="0">PURITY Quell ST 1200 CTG</option>
      <option value="270000" data-vessel="0">PURITY Quell ST C150</option>
      <option value="550000" data-vessel="0">PURITY Quell ST C500</option>`;
  </script>

  <div id="items-container"></div>

  <label>Í≥ÑÏïΩÍ∏∞Í∞Ñ</label>
  <select id="contract">
    <option value="12" data-discount="5">1ÎÖÑ</option>
    <option value="24" data-discount="15">2ÎÖÑ</option>
    <option value="36" data-discount="30" selected>3ÎÖÑ</option>
  </select>

  <label>ÍµêÏ≤¥Ï£ºÍ∏∞ (Í∞úÏõî)</label>
  <input type="number" id="cycle" value="6">

  <div class="result">
    üìå Ïõî ÎÇ©Î∂ÄÏï° (VAT Ìè¨Ìï®): <span id="monthly"></span> Ïõê<br>
    üí° ÏÑ§ÏπòÎπÑ Ìè¨Ìï® Ïãú: <span id="withInstall"></span> Ïõê
  </div>

  <script>
    const contract = document.getElementById('contract');
    const cycle = document.getElementById('cycle');
    const monthly = document.getElementById('monthly');
    const withInstall = document.getElementById('withInstall');
    const itemsContainer = document.getElementById('items-container');

    for (let i = 1; i <= 5; i++) {
      const label = document.createElement('label');
      label.textContent = `ÌíàÎ™© ${i}`;
      const select = document.createElement('select');
      select.className = 'item';
      select.innerHTML = optionsHTML;
      itemsContainer.appendChild(label);
      itemsContainer.appendChild(select);
    }

    function calc() {
      const selects = document.querySelectorAll('.item');
      const months = parseInt(contract.value);
      const discount = parseFloat(contract.selectedOptions[0].dataset.discount);
      const cycleVal = parseInt(cycle.value);

      const discountRate = 1 - discount / 100;

      let totalFilterDisc = 0;
      let totalVesselDisc = 0;

      selects.forEach(select => {
        const option = select.selectedOptions[0];
        if (option && option.value !== "") {
          const filter = parseInt(option.value);
          const vessel = parseInt(option.dataset.vessel);
          const filterDisc = Math.floor(filter * discountRate);
          const vesselDisc = Math.floor(vessel * discountRate);

          totalFilterDisc += filterDisc / cycleVal;
          totalVesselDisc += vesselDisc / months;
        }
      });

      const serviceFee = 1390;
      const installFee = 100000 / months;

      const base = totalFilterDisc + totalVesselDisc + serviceFee;
      const vat = Math.ceil(base * 1.1);
      const totalWithInstall = Math.ceil((base + installFee) * 1.1);

      monthly.innerText = vat.toLocaleString();
      withInstall.innerText = totalWithInstall.toLocaleString();
    }

    document.addEventListener('change', e => {
      if (e.target.classList.contains('item') || e.target === contract || e.target === cycle) {
        calc();
      }
    });

    window.onload = calc;
  </script>
</body>
</html>
